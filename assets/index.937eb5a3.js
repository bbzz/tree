import{d as e,c as t,w as n,v as r,r as i,a,o,b as l,e as s}from"./vendor.dfe66ec0.js";function d(){let e="";return e+=u((new Date).getTime(),8),e+=u(Math.ceil(Math.random()*62**6),6),e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e,t){let n="";for(let r=0;r<t;r++)n=c[e%c.length]+n,e=Math.floor(e/c.length);return n}function f(){return{id:d(),title:"",editTime:Date.now(),children:[]}}const m=e({name:"Tree",props:{data:{type:Object,required:!0},index:{type:Number,default:0}},emits:["insertSiblingNode"],directives:{focus:{mounted(e){e.focus()}}},setup(e,{emit:a}){const o=(t,n)=>{var r;null==(r=e.data.children)||r.splice(n?t:t+1,0,f())};return()=>{var l;return t("div",{class:"node"},[t("div",{class:"root"},[n(t("input",{"onUpdate:modelValue":t=>e.data.title=t,onKeydown:t=>((e,t,n)=>{if("Enter"===e.key){const t=e.shiftKey;a("insertSiblingNode",n,t)}if("Tab"===e.key)return e.target.blur(),t.children||(t.children=[]),t.children.push(f()),e.preventDefault(),!1})(t,e.data,e.index)},null),[[r,e.data.title],[i("focus")]])]),e.data.children&&e.data.children.length?t("ul",{class:["leaf",{one:1===e.data.children.length}]},[null==(l=e.data.children)?void 0:l.map(((e,n)=>t("li",{key:e.id},[t(m,{data:e,index:n,onInsertSiblingNode:o},null)])))]):null])}}});var p={id:d(),title:"",editTime:0,children:[]};var v="_container_11tig_1";s({setup(){const e=a(p),n=localStorage.getItem("__knowData");if(n){const t=JSON.parse(n);t.editTime,e.value=t}setInterval((()=>{console.info("自动保存到本地",Date.now()),e.value.editTime=Date.now(),localStorage.setItem("__knowData",JSON.stringify(e.value))}),3e4);const r=a(null);return window.addEventListener("keydown",(function(t){"KeyS"===t.code&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e.value.editTime=Date.now(),localStorage.setItem("__knowData",JSON.stringify(e.value)),alert("保存成功"))}),!1),o((()=>{r.value&&(r.value.className=v)})),l((async()=>{const e=new Promise(((e,t)=>{setTimeout((()=>e("")),2e3)}));await e})),()=>t("div",{ref:r},[t(m,{data:e.value,class:"qq"},null)])}}).mount("#app");
